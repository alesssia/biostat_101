\documentclass[12pt]{book}

\usepackage[a4paper, 
    top=24mm, 
    bottom=24mm, 
    inner=32mm, 
    outer=25mm,
    marginparwidth=20mm,
    marginparsep=3mm,]{geometry}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{hyperref}
\usepackage{url}
\usepackage{listings}
\usepackage[dvipsnames]{xcolor}
\usepackage{minitoc}
\usepackage{comment}
\usepackage{lmodern}
\usepackage{anyfontsize}
\usepackage[italian]{babel}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{relsize}
\usepackage{xspace}
\usepackage{booktabs}
\usepackage{mathtools}
\usepackage{enumitem}
\usepackage{framed}
\usepackage{amsthm}
\usepackage{thmtools}
\usepackage{etoolbox}
\usepackage{fancybox}
\usepackage{fancyvrb}
\usepackage{marginnote}
\usepackage{eso-pic}
\usepackage{anyfontsize}
\usepackage{transparent}
\usepackage{mdframed}
\usepackage{needspace}
\usepackage{nicematrix}

\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.17}
\usepackage{tkz-euclide}
\usetikzlibrary{calc}
\usetikzlibrary{matrix}
\usetikzlibrary{shapes, arrows}

\usepackage{color}
\usepackage{multicol}
\usepackage[most]{tcolorbox}
\usepackage{varwidth}

\usepackage{fancyhdr}
\usepackage[style=iso]{datetime2}

% \usepackage{charter}

\renewcommand*{\ttdefault}{qcr}


\lstset{
     literate=%
         {á}{{\'a}}1
         {à}{{\`a}}1
         {é}{{\'e}}1
         {è}{{\`e}}1
         {È}{{\`E}}1
         {…}{{\dots}}1
         {ù}{{\`u}}1
         {ò}{{\`o}}1
}

\newcommand{\Clang}[0]{C\xspace}
\newcommand{\matindex}[1]{\color{red}\tiny#1}

\usepackage{silence}

\WarningFilter{minitoc(hints)}{W0023}
\WarningFilter{minitoc(hints)}{W0028}
\WarningFilter{minitoc(hints)}{W0030}
\WarningFilter{minitoc(hints)}{W0024}


\newenvironment{myleftbar}{%
\def\FrameCommand{\hspace{0.6em}\textcolor{NavyBlue}{\vrule width 2pt}\hspace{0.6em}}%
\MakeFramed{\advance\hsize-\width \FrameRestore}\noindent\hspace{-0.5em}}%
{\endMakeFramed}


\declaretheoremstyle[
spaceabove=6pt,
spacebelow=1pt
headfont=\normalfont\bfseries,
headpunct={},
headformat={\cornersize*{2pt}\ovalbox{\NAME~{\color{NavyBlue}\NUMBER}}},
bodyfont=\normalfont,
]{exobreak}

\declaretheorem[parent=subsection, numberwithin=chapter, style=exobreak, name=Esercizio,%
postheadhook=\leavevmode\myleftbar,%
prefoothook =\endmyleftbar]{exercise}

\AtBeginEnvironment{exercise}{\Needspace{5\baselineskip}}

\newenvironment{solution}[2][]{
\vskip 1ex
\noindent\textbf{Soluzione all'esercizio~\ref{#2}}
#1
\vskip 1ex
}{}

\AtBeginEnvironment{solution}{\Needspace{5\baselineskip}}


\newcommand{\chapsubtitle}[1]{
\vspace{-1cm}
{\LARGE #1}
\vspace{1cm}
}

\newcommand{\exnote}[1]{%
\vspace{0.5em}%
\noindent\textbf{#1:}\xspace}

\lstdefinestyle{bashstyle}{%
language=Bash,
basicstyle=\footnotesize\ttfamily\color{white},%font size/family/etc. for source (e.g. basicstyle=\ttfamily\small)
backgroundcolor=\color{black},%colour for the background. External color or xcolor package needed.
commentstyle=\itshape\color{white},%style of comments in source language.
keywordstyle=\bfseries\color{white},%style of keywords in source language (e.g. keywordstyle=\color{red})
identifierstyle=\color{white},
emphstyle=\color{white},
stringstyle=\color{white},%style of strings in source language
showspaces=false,%emphasize spaces in code (true/false)
showtabs=false,%emphasize tabulators in code (true/false)
rulecolor=\color{black},
rulesepcolor=\color{black}
}

\lstdefinestyle{Rstyle}{%
language=R,
basicstyle=\footnotesize\ttfamily\color{black},%font size/family/etc. for source (e.g. basicstyle=\ttfamily\small)
backgroundcolor=\color{gray!10},%colour for the background. External color or xcolor package needed.
commentstyle=\itshape\color{gray!90},%style of comments in source language.
keywordstyle=\bfseries\color{NavyBlue},%style of keywords in source language (e.g. keywordstyle=\color{red})
identifierstyle=\color{NavyBlue},
emphstyle=\color{black},
stringstyle=\color{PineGreen},%style of strings in source language
showspaces=false,%emphasize spaces in code (true/false)
showstringspaces=false,% underline spaces within strings only
showtabs=false,%emphasize tabulators in code (true/false)
breaklines=true, % sets automatic line breaking
frame=single,% frame around code
rulecolor=\color{black},
rulesepcolor=\color{white},
keepspaces=true% keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
}

\lstdefinestyle{Rstylescript}{%
language=R,
basicstyle=\footnotesize\ttfamily\color{black},%font size/family/etc. for source (e.g. basicstyle=\ttfamily\small)
backgroundcolor=\color{white},%colour for the background. External color or xcolor package needed.
commentstyle=\itshape\color{gray!90},%style of comments in source language.
keywordstyle=\bfseries\color{NavyBlue},%style of keywords in source language (e.g. keywordstyle=\color{red})
identifierstyle=\color{NavyBlue},
emphstyle=\color{black},
stringstyle=\color{PineGreen},%style of strings in source language
showspaces=false,%emphasize spaces in code (true/false)
showstringspaces=false,% underline spaces within strings only
showtabs=false,%emphasize tabulators in code (true/false)
breaklines=true, % sets automatic line breaking
frame=single,% frame around code
rulecolor=\color{black},
rulesepcolor=\color{white},
keepspaces=true% keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
}


\lstdefinestyle{Rinlinestyle}{
    belowcaptionskip=1\baselineskip,
    breaklines=true,
    numbers=none,
    basicstyle=\ttfamily\small,
    keywordstyle=\bfseries\color{NavyBlue},
    commentstyle=\itshape\color{gray!90},
    identifierstyle=\bfseries\color{NavyBlue},
    stringstyle=\color{PineGreen},
    backgroundcolor=\color{gray!5!white},
    frame=single,
    rulecolor=\color{gray!50!white},
    showstringspaces=false,
}

\lstset{escapeinside={(*@}{@*)}}

\newcommand*\lsin{\lstinline[style=Rinlinestyle]}

\newtcolorbox{mybox}[2][]{empty, 
colframe=black, colback=gray!15, coltitle=black,
fonttitle=\bfseries\sffamily,
attach boxed title to top left={yshift=-2.5mm},
boxed title style={empty, size=small, top=1mm, bottom=0pt},
varwidth boxed title=0.5\linewidth,
frame code={
\path (title.east|-frame.north) coordinate (aux);
\path[draw=black, line width=0.5mm, rounded corners]
(frame.west) |- ([xshift=-2.5mm]title.north east) to[out=0, in=180] ([xshift=7.5mm]aux)-|(frame.east)|-(frame.south)-|cycle;  
},
title={#2},#1}

\lstset{
    style=bashstyle,
    language={bash}
}

% \lstset{
%     style=cppstyle,
%     language={C++}
% }

\lstset{
	style=Rstyle,
	language={R}
}  



\hypersetup{
    colorlinks=true,
    linkcolor=Brown,
    filecolor=magenta,
    urlcolor=MidnightBlue,
    pdftitle={Dispense C++},
    citecolor=ForestGreen,
    pdfpagemode=FullScreen,
}


\newenvironment{myitemize}
{ \begin{itemize}
    \setlength{\itemsep}{0pt}
    \setlength{\parskip}{0pt}
    \setlength{\parsep}{0pt}     }
{ \end{itemize}                  } 


\newenvironment{myenumerate}
{ \begin{enumerate}
    \setlength{\itemsep}{0pt}
    \setlength{\parskip}{0pt}
    \setlength{\parsep}{0pt}     }
{ \end{enumerate}  }


\tikzstyle{startstop} = [rectangle, rounded corners, minimum width=3cm, minimum height=1cm,text centered, draw=black]
\tikzstyle{code} = [rectangle, draw=none]
\tikzstyle{terminator} = [rectangle, draw, text centered, rounded corners, minimum height=2em]
\tikzstyle{process} = [rectangle, draw, text centered, minimum height=2em]
\tikzstyle{comment} = [rectangle, draw, text centered, minimum height=2em, text width=10em, fill=gray!20]
\tikzstyle{decision} = [diamond, draw, text centered, minimum height=2em, aspect=2]
\tikzstyle{data}=[trapezium, draw, text centered, trapezium left angle=60, trapezium right angle=120, minimum height=2em]
\tikzstyle{connector} = [draw, -latex']
\tikzstyle{commconn} = [draw, -latex',dashed]



\begin{document}

% \fancyhf{}
% % \fancyhead[RE,LO]{}
% \fancyfoot[RE,LO]{Autore: Alessia Visconti -- Versione: \today}
% \pagestyle{fancy}
%

\dominitoc

\input{front/cover.tex}

\tableofcontents

\input{chapters/presentazione.tex}
\input{chapters/installareR.tex}
\input{chapters/introduzioneR.tex}
\input{chapters/dati.tex}
\input{chapters/descrittiva.tex}
\input{chapters/inferenziale.tex}

\appendix
\input{chapters/soluzioni.tex}

\end{document}
